<template lang="pug">
.vuecal__flex.vuecal__all-day
  span(style="width: 3em")
    span {{ allDayText }}
  .vuecal__flex.vuecal__cells(
    :class="`${view.id}-view`"
    grow
    :wrap="(!options.minCellWidth && !(daySplits && options.minSplitWidth)) || !vuecal.isWeekView"
    :column="!!options.minCellWidth || !!(daySplits && options.minSplitWidth)")
    vuecal-cell(
      v-for="(cell, i) in cells"
      :key="i"
      :options="options"
      :edit-events="editEvents"
      :data="cell"
      :all-day="true"
      :cell-width="options.hideWeekdays.length && (vuecal.isWeekView || vuecal.isMonthView) && vuecal.cellWidth"
      :min-timestamp="options.minTimestamp"
      :max-timestamp="options.maxTimestamp"
      :cell-splits="daySplits")
      template(v-slot:event="{ event, view }")
        slot(name="event" :view="view" :event="event")
          .vuecal__event-title.vuecal__event-title--edit(
            v-if="editEvents.title && event.title && event.titleEditable"
            contenteditable
            @blur="onEventTitleBlur($event, event)"
            v-html="event.title")
          .vuecal__event-title(v-else-if="event.title" v-html="event.title")
          .vuecal__event-content(
            v-if="event.content && !shortEvents && !vuecal.isShortMonthView"
            v-html="event.content")
      slot(slot="no-event" name="no-event")
</template>

<script>
import Cell from './cell'

export default {
  inject: ['vuecal', 'view', 'editEvents'],
  components: { 'vuecal-cell': Cell },
  props: {
    // Vue-cal main component options (props).
    options: { type: Object, required: true },
    cells: { type: Array, required: true },
    daySplits: { type: Array, default: () => [] },
    shortEvents: { type: Boolean, default: true },
    allDayText: { type: String, required: true }
  }
}
</script>
